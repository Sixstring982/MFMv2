<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.6"/>
<title>MFMv2: MFM::Parity2D_4x4 Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">MFMv2
   </div>
   <div id="projectbrief">Movable Feast Machine Simulator v2</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.6 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li class="current"><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li><a href="classes.html"><span>Data&#160;Structure&#160;Index</span></a></li>
      <li><a href="hierarchy.html"><span>Class&#160;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Data&#160;Fields</span></a></li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Data Structures</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Friends</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Macros</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(10)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><b>MFM</b></li><li class="navelem"><a class="el" href="classMFM_1_1Parity2D__4x4.html">Parity2D_4x4</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-types">Public Types</a> &#124;
<a href="#pub-static-methods">Static Public Member Functions</a> &#124;
<a href="#pub-static-attribs">Static Public Attributes</a>  </div>
  <div class="headertitle">
<div class="title">MFM::Parity2D_4x4 Class Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p><code>#include &lt;<a class="el" href="Parity2D__4x4_8h_source.html">Parity2D_4x4.h</a>&gt;</code></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-types"></a>
Public Types</h2></td></tr>
<tr class="memitem:a0b50cdd22a2f99ecec783371fad6411b"><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom">{ <br/>
&#160;&#160;<b>W</b> = 4, 
<b>H</b> = 4, 
<b>DATA_BITS</b> = W * H, 
<b>ECC_BITS</b> = W + H + 1, 
<br/>
&#160;&#160;<b>TABLE_SIZE</b> = 1 &lt;&lt; DATA_BITS, 
<b>INDEX_MASK</b> = TABLE_SIZE - 1, 
<b>ECC_MASK</b> = (1 &lt;&lt; ECC_BITS) - 1
<br/>
 }</td></tr>
<tr class="separator:a0b50cdd22a2f99ecec783371fad6411b"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-static-methods"></a>
Static Public Member Functions</h2></td></tr>
<tr class="memitem:a5679dca14a1676f5448e65d48eb929ab"><td class="memItemLeft" align="right" valign="top">static u32&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMFM_1_1Parity2D__4x4.html#a5679dca14a1676f5448e65d48eb929ab">Compute2DParity</a> (u32 dataBits)</td></tr>
<tr class="separator:a5679dca14a1676f5448e65d48eb929ab"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2c0274890db9f0f9f251392770907a3c"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a2c0274890db9f0f9f251392770907a3c"></a>
static u32&#160;</td><td class="memItemRight" valign="bottom"><b>ComputeParitySlow</b> (u32 dataBits)</td></tr>
<tr class="separator:a2c0274890db9f0f9f251392770907a3c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0538bcb66a2a54ade881940416e91303"><td class="memItemLeft" align="right" valign="top">static u32&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMFM_1_1Parity2D__4x4.html#a0538bcb66a2a54ade881940416e91303">Add2DParity</a> (u32 dataBits)</td></tr>
<tr class="separator:a0538bcb66a2a54ade881940416e91303"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1107587aae047639411fe68c94953398"><td class="memItemLeft" align="right" valign="top">static bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMFM_1_1Parity2D__4x4.html#a1107587aae047639411fe68c94953398">Remove2DParity</a> (u32 allBits, u32 &amp;dataBits)</td></tr>
<tr class="separator:a1107587aae047639411fe68c94953398"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a17c95835f41d7995c5e3c8932c0faf90"><td class="memItemLeft" align="right" valign="top">static bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMFM_1_1Parity2D__4x4.html#a17c95835f41d7995c5e3c8932c0faf90">Check2DParity</a> (const u32 allBits)</td></tr>
<tr class="separator:a17c95835f41d7995c5e3c8932c0faf90"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a913bbd137e0b2927511540e900448413"><td class="memItemLeft" align="right" valign="top">static u32&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMFM_1_1Parity2D__4x4.html#a913bbd137e0b2927511540e900448413">CheckAndCorrect2DParity</a> (const u32 allBits)</td></tr>
<tr class="separator:a913bbd137e0b2927511540e900448413"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad7b11e2a8c2a66b07156a5b862d52d16"><td class="memItemLeft" align="right" valign="top">static u32&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMFM_1_1Parity2D__4x4.html#ad7b11e2a8c2a66b07156a5b862d52d16">Correct2DParityIfPossible</a> (u32 allBits)</td></tr>
<tr class="separator:ad7b11e2a8c2a66b07156a5b862d52d16"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-static-attribs"></a>
Static Public Attributes</h2></td></tr>
<tr class="memitem:ac1544c5c99307bbd61fdb8be44925225"><td class="memItemLeft" align="right" valign="top">static const u8&#160;</td><td class="memItemRight" valign="bottom"><b>indices2D</b> [H+1][W+1]</td></tr>
<tr class="separator:ac1544c5c99307bbd61fdb8be44925225"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p><a class="el" href="classMFM_1_1Parity2D__4x4.html">Parity2D_4x4</a> is an all-static class for manipulating (one particular instance of) two-dimensional parity error detection and correction. This class handles error detection and correction <em>only</em> of sixteen bit quantities being protected with nine additional bits. In addition, this class assumes the nine ECC bits will be placed to the left of the sixteen data bits when they are joined into a 25-bit quantity.</p>
<p>Redundancy at the level of nine bits protecting sixteen bits ensures that all single bit errors are correctable and all double bit errors are detectable. Most all triple bit errors are detectable as well.</p>
<p>This class uses a table lookup to accelerate the generation and checking of the parity bits. In particular, <a class="el" href="classMFM_1_1Parity2D__4x4.html#a5679dca14a1676f5448e65d48eb929ab">Compute2DParity</a> and <a class="el" href="classMFM_1_1Parity2D__4x4.html#a17c95835f41d7995c5e3c8932c0faf90">Check2DParity</a> are both likely inlined and fast enough to use with impunity virtually anywhere. In addition, <a class="el" href="classMFM_1_1Parity2D__4x4.html#a913bbd137e0b2927511540e900448413">CheckAndCorrect2DParity</a> and Remove2DParityFrom are fast <em>if</em> no errors are detected, but note only moderate effort has been made to accelerate <a class="el" href="classMFM_1_1Parity2D__4x4.html#ad7b11e2a8c2a66b07156a5b862d52d16">Correct2DParityIfPossible</a>, which is the routine that actually performs the error correction to the degree possible. </p>
</div><h2 class="groupheader">Member Function Documentation</h2>
<a class="anchor" id="a0538bcb66a2a54ade881940416e91303"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static u32 MFM::Parity2D_4x4::Add2DParity </td>
          <td>(</td>
          <td class="paramtype">u32&#160;</td>
          <td class="paramname"><em>dataBits</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Return the 25 bit quantity formed by prefixing the nine bits of 2D parity to the 16 bits of <em>dataBits</em>.</p>
<dl class="section see"><dt>See Also</dt><dd><a class="el" href="classMFM_1_1Parity2D__4x4.html#a5679dca14a1676f5448e65d48eb929ab">Compute2DParity</a> </dd></dl>

</div>
</div>
<a class="anchor" id="a17c95835f41d7995c5e3c8932c0faf90"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static bool MFM::Parity2D_4x4::Check2DParity </td>
          <td>(</td>
          <td class="paramtype">const u32&#160;</td>
          <td class="paramname"><em>allBits</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Check the 2D parity of <em>allBits</em>, assuming it is laid out in bit number order from its most significant bit on the left to its least significant bit on the right, using the data bit and parity bit definitions given in the documentation for <a class="el" href="classMFM_1_1Parity2D__4x4.html#a5679dca14a1676f5448e65d48eb929ab">Compute2DParity</a>.</p>
<dl class="section return"><dt>Returns</dt><dd>true if allBits is a correctly formatted ECC+DATA value, with no detectable errors, or false otherwise</dd></dl>
<dl class="section see"><dt>See Also</dt><dd><a class="el" href="classMFM_1_1Parity2D__4x4.html#a913bbd137e0b2927511540e900448413">CheckAndCorrect2DParity</a> </dd></dl>

</div>
</div>
<a class="anchor" id="a913bbd137e0b2927511540e900448413"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static u32 MFM::Parity2D_4x4::CheckAndCorrect2DParity </td>
          <td>(</td>
          <td class="paramtype">const u32&#160;</td>
          <td class="paramname"><em>allBits</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Check the 2D parity of <em>allBits</em>, assuming it is laid out in bit number order from its most significant bit on the left to its least significant bit on the right, using the data bit and parity bit definitions given in the documentation for <a class="el" href="classMFM_1_1Parity2D__4x4.html#a5679dca14a1676f5448e65d48eb929ab">Compute2DParity</a>.</p>
<p>The value returned is equal to <em>allBits</em> if the parity checks, is 0 if the parity does not check but <em>allBits</em> is so damaged it cannot be repaired. Otherwise the value returned is non-zero and not equal to <em>allBits</em>, and it represents the error-corrected value of <em>allBits</em>.</p>
<dl class="section see"><dt>See Also</dt><dd><a class="el" href="classMFM_1_1Parity2D__4x4.html#a5679dca14a1676f5448e65d48eb929ab">Compute2DParity</a> </dd></dl>

</div>
</div>
<a class="anchor" id="a5679dca14a1676f5448e65d48eb929ab"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static u32 MFM::Parity2D_4x4::Compute2DParity </td>
          <td>(</td>
          <td class="paramtype">u32&#160;</td>
          <td class="paramname"><em>dataBits</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Compute the nine bit quantity representing the 2D parity of the bottom 16 bits of <em>dataBits</em>. Assume 0..f represent the bottom sixteen bits of <em>dataBits</em> from least significant (0) to most significant (f) bit, and assume g..o represent the bottom nine bits of the computed 2D parity, from least significant (g) to most significant (o) bit. Then given this layout:</p>
<pre>
      f  e  d  c  j
      b  a  9  8  i
      7  6  5  4  h
      3  2  1  0  g
      k  l  m  n  o
</pre><p>this function returns the nine bits (corresponding to g..o) such that each 5-element row and 5-element column has odd parity, and the overall group of 25 bits has even parity (but is never all zero).</p>
<dl class="section see"><dt>See Also</dt><dd><a class="el" href="classMFM_1_1Parity2D__4x4.html#a0538bcb66a2a54ade881940416e91303">Add2DParity</a> </dd></dl>

</div>
</div>
<a class="anchor" id="ad7b11e2a8c2a66b07156a5b862d52d16"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">u32 MFM::Parity2D_4x4::Correct2DParityIfPossible </td>
          <td>(</td>
          <td class="paramtype">u32&#160;</td>
          <td class="paramname"><em>allBits</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Attempt to error-correct <em>allBits</em>. <b>Note:</b> Usually callers will prefer to call <a class="el" href="classMFM_1_1Parity2D__4x4.html#a913bbd137e0b2927511540e900448413">CheckAndCorrect2DParity</a>, because it's fast <em>if</em> the parity is correct, while this method is slow in all cases.</p>
<p>The value returned is equal to <em>allBits</em> if the parity checks, is 0 if the parity does not check but <em>allBits</em> is so damaged it cannot be repaired. Otherwise the value returned is non-zero and not equal to <em>allBits</em>, and it represents the error-corrected value of <em>allBits</em>.</p>
<dl class="section see"><dt>See Also</dt><dd><a class="el" href="classMFM_1_1Parity2D__4x4.html#a913bbd137e0b2927511540e900448413">CheckAndCorrect2DParity</a> </dd></dl>

</div>
</div>
<a class="anchor" id="a1107587aae047639411fe68c94953398"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static bool MFM::Parity2D_4x4::Remove2DParity </td>
          <td>(</td>
          <td class="paramtype">u32&#160;</td>
          <td class="paramname"><em>allBits</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">u32 &amp;&#160;</td>
          <td class="paramname"><em>dataBits</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Remove the nine parity bits from <em>allBits</em> if possible, storing the (possibly error-corrected) resulting sixteen bits in <em>dataBits</em>.</p>
<dl class="section return"><dt>Returns</dt><dd><b>true</b> if either the parity was correct or an error was detected and successfully corrected. In either case <em>dataBits</em> will have been updated to the extracted data value. Otherwise returns <b>false</b> and <em>dataBits</em> remains untouched. </dd></dl>

</div>
</div>
<h2 class="groupheader">Field Documentation</h2>
<a class="anchor" id="ac1544c5c99307bbd61fdb8be44925225"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">const u8 MFM::Parity2D_4x4::indices2D</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<b>Initial value:</b><div class="fragment"><div class="line">= {</div>
<div class="line">    </div>
<div class="line">    { 0x0f, 0x0e, 0x0d, 0x0c, 0x13 },  </div>
<div class="line">    { 0x0b, 0x0a, 0x09, 0x08, 0x12 },  </div>
<div class="line">    { 0x07, 0x06, 0x05, 0x04, 0x11 },  </div>
<div class="line">    { 0x03, 0x02, 0x01, 0x00, 0x10 },  </div>
<div class="line">    { 0x14, 0x15, 0x16, 0x17, 0x18 },  </div>
<div class="line">  }</div>
</div><!-- fragment -->
</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>src/core/include/<a class="el" href="Parity2D__4x4_8h_source.html">Parity2D_4x4.h</a></li>
<li>src/core/src/Parity2D_4x4.cpp</li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Fri Oct 17 2014 15:10:36 for MFMv2 by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.6
</small></address>
</body>
</html>
